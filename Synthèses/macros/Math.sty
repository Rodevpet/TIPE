%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%% Chargement des paquet externe %%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Environnement mathématique, (équation sur plusieur ligne)
\usepackage{amsmath}

% Lettre scriptural
\usepackage{mathrsfs}

% Symbole mathématique, (symbole des réels,)
\usepackage{amsfonts}

% Permet la modification en profondeur des paramètres Latex, comme le changement automatique de * par ⨉
\usepackage{mathtools}
% Tableau mathématique (matrice, système d'équation...etc)
\usepackage{array}

% Permet de faire des encadrées stylisé
\usepackage{tcolorbox}
\tcbuselibrary{many}
% Tableau de variation
\usepackage{tkz-tab}

% Libraire pour la création d'encadré stylisé
\tcbuselibrary{theorems}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%           Raccourci           %%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Symbole
\newcommand{\bul}{\bullet}

\newcommand{\coord}[3]{\begin{pmatrix}
	#1\\
	#2\\
	#3
\end{pmatrix}}
\newcommand \infp {
    +\infty
}

% Symbole
\newcommand \infm {
    -\infty
}

% ------ Ensemble ------

% Ensemble N
\newcommand \N {
\mathbb{N}
}

% Ensemble Z
\newcommand \Z {
\mathbb{Z}
}

% Ensemble R
\newcommand \R {
    \mathbb{R}
}

% Ensemble C
\newcommand \C {
    \mathbb{C}
}

% Symbole
\newcommand \lf {
    \Leftrightarrow
}

% Symbole
 \newcommand \fa {
   \forall
 }

% ------ Symbole grecque ------

% Symbole
\newcommand{\del}{
    \Delta
}

% ------ Opérateur ------

% Opérateur
\newcommand{\sq}[1]{
    \sqrt{#1}
}

% Opérateur
\begingroup
    \lccode`~=`*
    \lowercase{\endgroup
    \def~{\times}%
}
\mathcode`*="8000

% Opérateur fraction
\newcommand \fr [2]{
    \frac{#1}{#2}
}

% ------ Géométrie ------
% Symbole vecteur
\renewcommand{\vec}[1]{
    \overrightarrow{#1}
}
% ------ Tableau ------
% Tableau de signe
\newcommand{\ts}[3]{
    \begin{tikzpicture}
        %ligne sur le côté droit, le /1 permet d'ajuster la hauteur de la ligne
        \tkzTabInit{$x$ / 1 , #1 / 1}{#2}
        %-------Tableau de signe---------
        % d : place une double barre centrée ;
        % t : place un trait en pointillé centré ;
        % z : place un zéro centré sur un trait un pointillé ;
        % h : permet de définir une zone interdite (la zone est hachurée par défaut) ;
        % + : place un signe + ;
        % - : place un signe -.
        \tkzTabLine{#3}
    \end{tikzpicture}
    }
% Tableau de signe et de variation
\newcommand{\tsv}[5]{
    \begin{tikzpicture}
        %ligne sur le côté droit, le /1 permet d'ajuster la hauteur de la ligne
        \tkzTabInit{$x$ / 1 , #1 / 1, #2 /2}{#3}
        %-------Tableau de signe---------
        % d : place une double barre centrée ;
        % t : place un trait en pointillé centré ;
        % z : place un zéro centré sur un trait un pointillé ;
        % h : permet de définir une zone interdite (la zone est hachurée par défaut) ;
        % + : place un signe + ;
        % - : place un signe -.
        \tkzTabLine{#4}
        %--------Tableau de variation--------
        % une expression seule avec - / x ou + / x ;
    	% une expression sur une double barre (prolongement par continuité) avec -C / x ou +C / x ;
        \tkzTabVar{#5}
    \end{tikzpicture}
}

% Tableau de signe, de variation et signe
\newcommand{\tsvs}[7]{
    \begin{tikzpicture}
        %ligne sur le côté droit, le /1 permet d'ajuster la hauteur de la ligne
        \tkzTabInit{$x$ / 1 , #1 / 1, #2 /2,#3 / 1}{#4}
        %-------Tableau de signe---------
        %d place une double barre centrée ;
    	%t place un trait en pointillé centré ;
    	%z place un zéro centré sur un trait un pointillé ;
    	%h permet de définir une zone interdite (la zone est hachurée par défaut) ;
    	%+ place un signe + ;
    	%- place un signe -.
        \tkzTabLine{#5}
        %--------Tableau de variation--------
        % une expression seule avec - / x ou + / x ;
    	% une expression sur une double barre (prolongement par continuité) avec -C / x ou +C / x ;
       \tkzTabVar{#6}
       \tkzTabLine{#7}
    \end{tikzpicture}
}

\newcommand{\tsvc}[9]{
\begin{tikzpicture}
\tkzTabInit{$x$ /1,#1 /1, #2 /2} {#3}
\tkzTabLine{#4}
\tkzTabVar{#5}
\tkzTabVal{#6}{#7}{0.5}{#8}{#9}
\end{tikzpicture}
}
% Début d'une matrice
\newcommand{\bmat}{
    \begin{pmatrix}
}

% Fin d'une matrice
\newcommand {\dmat}{
    \end{pmatrix}
}

% Début d'un système
\newcommand{\bsys}{
\begin{cases}
    }

% Fin d'un système
\newcommand{\esys}{
\end{cases}
}

% Crochet
\renewcommand{\{}{
    \left\lbrace
}
\renewcommand{\}}{
    \right\rbrace
}

% Parenthèses
\def\resetMathstrut@{%
    \setbox\z@\hbox{%
    \mathchardef\@tempa\mathcode`\[\relax
    \def\@tempb##1"##2##3{\the\textfont"##3\char"}%
    \expandafter\@tempb\meaning\@tempa \relax
}%
\ht\Mathstrutbox@\ht\z@ \dp\Mathstrutbox@\dp\z@}
\makeatother
\begingroup
    \catcode`(\active \xdef({\left\string(}
    \catcode`)\active \xdef){\right\string)}
\endgroup
\mathcode`(="8000 \mathcode`)="8000

%%%%%%%%%%%% Encadrées %%%%%%%%%%%%
% ------ Théorème ------

% Couleur de l'entête
\definecolor{ArrPlanTheoreme}{cmyk}{0, 0.531, 0.557, 0.239}

% Coueleur du contenu
\definecolor{PremPlanTheoreme}{cmyk}{0, 0.031, 0.075, 0.004}

\newtcbtheorem{theo}{Théorème}{
    lower separated=false,
    sharp corners,
    colback=PremPlanTheoreme,
    colframe=ArrPlanTheoreme,
    leftrule=0pt, toprule=0pt,
    fonttitle=\bfseries,
    colbacktitle=ArrPlanTheoreme,
    coltitle=PremPlanTheoreme,
    coltext=ArrPlanTheoreme,
    enhanced,
    breakable,
    boxed title style={colframe=ArrPlanTheoreme, sharp corners},
    attach boxed title to top left,
}{theo}

% ------ Propriété ------

% Couleur du contenu
\definecolor{PremPlanPropriete}{HTML}{FFB3F3}

% Couleur de l'entête
\definecolor{ArrPlanPropriete}{HTML}{8F3A84}

\newtcbtheorem{prop}{Propriété}{
    lower separated=false,
    sharp corners,
    colback=PremPlanPropriete,
    colframe=ArrPlanPropriete,
    leftrule=0pt, toprule=0pt,
    fonttitle=\bfseries,
    colbacktitle=ArrPlanPropriete,
    coltitle=PremPlanPropriete,
    coltext=ArrPlanPropriete,
    enhanced,
    breakable,
    boxed title style={colframe=ArrPlanPropriete, sharp corners},
    attach boxed title to top left,
}{prop}

% ------ Définition ------

% Couleur du contenu
\definecolor{PremPlanDefinition}{HTML}{B3FAFF}

% Couleur de l'entête
\definecolor{ArrPlanDefinition}{HTML}{4EBAC2}

\newtcbtheorem{df}{Définition \addcontentsline{toc}{subsection}}{
    lower separated=false,
    sharp corners,
    colback=PremPlanDefinition,
    colframe=ArrPlanDefinition,
    leftrule=0pt, toprule=0pt,
    fonttitle=\bfseries,
    colbacktitle=ArrPlanDefinition,
    coltitle=PremPlanDefinition,
    coltext=ArrPlanDefinition,
    enhanced,
    breakable,
    boxed title style={colframe=ArrPlanDefinition, sharp corners},
    attach boxed title to top left,
}{df}

\definecolor{PremPlanLemme}{HTML}{AD73FF}

% Couleur de l'entête
\definecolor{ArrPlanLemme}{HTML}{6900FF}
% ------ Lemme   ------
\newtcbtheorem{lem}{Lemme}{
    lower separated=false,
    sharp corners,
    colback=PremPlanLemme,
    colframe=ArrPlanLemme,
    leftrule=0pt, toprule=0pt,
    fonttitle=\bfseries,
    colbacktitle=ArrPlanLemme,
    coltitle=PremPlanLemme,
    coltext=ArrPlanLemme,
    enhanced,
    breakable,
    boxed title style={colframe=ArrPlanLemme, sharp corners},
    attach boxed title to top left,
}{lem}
% ------ Exemple ------

\newlength{\mylen}
\newlength{\hauteur}
\newlength{\malongueur}
\settowidth{\mylen}{Méthode :}
\setlength{\hauteur}{\baselineskip}
\addtolength{\hauteur}{0.5mm}
\settowidth{\malongueur}{408.52pt}

% Couleur de la ligne verticale
\definecolor{ArrPlanExemple}{HTML}{883352}

\newtcbtheorem{demo}{Demo.}{
    enhanced,
    breakable,
    coltitle=ArrPlanExemple, fonttitle=\bfseries,
    colbacktitle=white,
    detach title,
    opacityfill=0,
    frame hidden,
    left skip=1.55\mylen,
    left=0mm,
    top=0.3mm,
    toptitle=0mm,
    overlay unbroken and first={
        \node[below left] at (interior.north west) {\tcbtitle};
        \draw[ArrPlanExemple, line width=1.5pt] (interior.north west)--(interior.south west);
    },
    overlay middle and last={
        \draw[ArrPlanExemple, line width=1.5pt] (interior.north west)--(interior.south west);
    }
}{demo}